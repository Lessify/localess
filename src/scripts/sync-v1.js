"use strict";(function(){function c(){return window.top!==window.self}function o(t){console.log("sendEditorData",t),window.parent.postMessage(t,"*")}function r(){let t=document.createElement("style");t.id="localess-css-sync",t.textContent="[data-ll-id]{outline:#74777f dashed 1px;display:block;}[data-ll-id]:hover{outline-style:solid;outline-color:#005cbb;}",document.head.appendChild(t)}function s(){document.querySelectorAll("[data-ll-id]").forEach(t=>{let i=t.getAttribute("data-ll-id");t.offsetHeight<5&&(t.style.minHeight="5px"),t.addEventListener("click",e=>{e.stopPropagation(),o({owner:"LOCALESS",type:"selectSchema",id:i})}),t.addEventListener("mouseenter",e=>{o({owner:"LOCALESS",type:"hoverSchema",id:i})}),t.addEventListener("mouseleave",e=>{o({owner:"LOCALESS",type:"leaveSchema",id:i})})})}if(c()){r(),setTimeout(()=>s(),1e3);class t{constructor(){this.version="v1";this.events={save:[],publish:[],input:[],change:[],enterSchema:[],hoverSchema:[]};console.log(`%c\u{1F680}\u{1F680}\u{1F680}LOCALESS: Sync version ${this.version} initialized\u{1F680}\u{1F680}\u{1F680}`,"background: #222; color: #0063EB; font-size: 2rem;"),addEventListener("message",e=>{if(e.origin===location.ancestorOrigins.item(0)){setTimeout(()=>s(),1e3);let n=e.data;switch(n.type){case"save":{this.emit(n);break}case"publish":{this.emit(n);break}case"input":{this.emit(n);break}case"change":{this.emit(n);break}case"enterSchema":{this.emit(n);break}case"hoverSchema":{this.emit(n);break}}}})}emit(e){let n=this.events[e.type];for(let a of n)a.apply(this,[e])}on(e,n){if(Array.isArray(e))for(let a of e)this.addEvent(a,n);else this.addEvent(e,n)}addEvent(e,n){this.events[e].indexOf(n)===-1&&this.events[e].push(n)}}window.localess=new t}})();
