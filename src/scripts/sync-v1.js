"use strict";(function(){function d(){return window.top!==window.self}function i(t){console.log("sendEditorData",t),window.parent.postMessage(t,"*")}function l(){let t=document.createElement("style");t.id="localess-css-sync",t.textContent=`
    [data-ll-id],[data-ll-field]{outline: 2px dashed rgba(0,92,187,0.5);transition: box-shadow ease-out 150ms;}
    [data-ll-id]:hover,[data-ll-field]:hover{box-shadow: inset 100vi 100vh rgba(0,92,187,0.1);outline: 2px solid rgba(0,92,187,1);cursor: pointer;}`,t.textContent+=`
    .ll-snackbar-container{position: fixed;bottom: 20px;display: flex;flex-direction: column-reverse;left: 50%;gap: 10px;}
    .ll-snackbar{min-width: 250px;background-color: #333;color: #fff;text-align: center;border-radius: 4px;padding: 16px;transform: translateX(-50%);box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);animation: ll-fadein 0.5s, ll-fadeout 0.5s 2.5s;}
    @keyframes ll-fadein {from {bottom: 0; opacity: 0;}to {bottom: 30px; opacity: 1;}}@keyframes ll-fadeout {from {bottom: 30px; opacity: 1;}to {bottom: 0; opacity: 0;}}`,document.head.appendChild(t)}function c(){document.querySelectorAll("[data-ll-id]:not([data-ll-hook])").forEach(t=>{let n=t.getAttribute("data-ll-id"),a=t.getAttribute("data-ll-schema");t.offsetHeight<5&&(t.style.minHeight="5px"),t.setAttribute("data-ll-hook","true"),t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),i({owner:"LOCALESS",type:"selectSchema",id:n,schema:a})}),t.addEventListener("mouseenter",e=>{i({owner:"LOCALESS",type:"hoverSchema",id:n,schema:a})}),t.addEventListener("mouseleave",e=>{i({owner:"LOCALESS",type:"leaveSchema",id:n,schema:a})}),t.querySelectorAll("[data-ll-field]").forEach(e=>{let o=e.getAttribute("data-ll-field");e.closest("[data-ll-id]")===t&&(e.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),i({owner:"LOCALESS",type:"selectSchema",id:n,schema:a,field:o})}),e.addEventListener("mouseenter",s=>{i({owner:"LOCALESS",type:"hoverSchema",id:n,schema:a,field:o})}),e.addEventListener("mouseleave",s=>{i({owner:"LOCALESS",type:"leaveSchema",id:n,schema:a,field:o})}))})})}function p(){let t=document.createElement("div");t.className="ll-snackbar-container",document.body.appendChild(t)}function r(t){let n=document.createElement("div");n.className="ll-snackbar",n.textContent=t,document.body.querySelector(".ll-snackbar-container")?.appendChild(n),setTimeout(()=>{n.remove()},3e3)}if(d()){l(),setTimeout(()=>c(),1e3);class t{constructor(){this.version="v1";this.events={save:[],publish:[],input:[],change:[],enterSchema:[],hoverSchema:[]};console.log(`%c\u{1F680}\u{1F680}\u{1F680}LOCALESS: Sync version ${this.version} initialized\u{1F680}\u{1F680}\u{1F680}`,"background: #222; color: #0063EB; font-size: 2rem;"),p(),r("Localess: Sync initialized."),addEventListener("message",a=>{if(a.origin===location.ancestorOrigins.item(0)){setTimeout(()=>c(),1e3);let e=a.data;switch(e.type){case"save":{this.emit(e);break}case"publish":{this.emit(e);break}case"input":{this.emit(e);break}case"change":{this.emit(e);break}case"enterSchema":{this.emit(e);break}case"hoverSchema":{this.emit(e);break}}}})}emit(a){let e=this.events[a.type];for(let o of e)o.apply(this,[a])}on(a,e){if(Array.isArray(a)){for(let o of a)this.addEvent(o,e);r(`Localess: Sync event added [${a.join(", ")}].`)}else this.addEvent(a,e),r(`Localess: Sync event added [${a}].`)}addEvent(a,e){this.events[a].indexOf(e)===-1&&this.events[a].push(e)}}window.localess=new t}})();
