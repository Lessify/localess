<h1 mat-dialog-title>User Invite</h1>
<mat-dialog-content>
  <form [formGroup]="form" class="step-container">
    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput type="email" formControlName="email" required autocomplete="off"/>
      <mat-error *ngIf="form.controls['email'].errors">{{fe.controlError(form.controls['email'])}}</mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Password</mat-label>
      <input matInput type="password" formControlName="password" required autocomplete="off"/>
      <mat-error *ngIf="form.controls['password'].errors">{{fe.controlError(form.controls['password'])}}</mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Display Name</mat-label>
      <input matInput type="text" formControlName="displayName" autocomplete="off"/>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Role</mat-label>
      <mat-select formControlName="role">
        <mat-option [value]="undefined">None</mat-option>
        <mat-option value="custom">Custom</mat-option>
        <mat-option value="admin">Admin</mat-option>
      </mat-select>
    </mat-form-field>

    <ng-container *ngIf="form.value.role === 'custom'">
      <b>Permissions</b>
      <mat-selection-list formControlName="permissions">

        <div mat-subheader>Administration</div>
        <mat-list-option checkboxPosition="before" value="USER_MANAGEMENT">
          <span matListItemTitle>User Management</span>
          <span matListItemLine>Invite, Delete users and change roles.</span>
        </mat-list-option>
        <mat-list-option checkboxPosition="before" value="SPACE_MANAGEMENT">
          <span matListItemTitle>Space Management</span>
          <span matListItemLine>Create, Update and Delete.</span>
        </mat-list-option>

        <mat-divider></mat-divider>
        <div mat-subheader>Translation</div>
        <mat-list-option checkboxPosition="before" value="TRANSLATION_READ">Read</mat-list-option>
        <mat-list-option checkboxPosition="before" value="TRANSLATION_UPDATE">Updated</mat-list-option>
        <mat-list-option checkboxPosition="before" value="TRANSLATION_CREATE">Create</mat-list-option>
        <mat-list-option checkboxPosition="before" value="TRANSLATION_DELETE">Delete</mat-list-option>
        <mat-list-option checkboxPosition="before" value="TRANSLATION_PUBLISH">Publish</mat-list-option>
        <mat-list-option checkboxPosition="before" value="TRANSLATION_EXPORT">Export</mat-list-option>
        <mat-list-option checkboxPosition="before" value="TRANSLATION_IMPORT">Import</mat-list-option>

        <mat-divider></mat-divider>
        <div mat-subheader>Schematic <b>(Beta)</b></div>
        <mat-list-option checkboxPosition="before" value="SCHEMATIC_READ">Read</mat-list-option>
        <mat-list-option checkboxPosition="before" value="SCHEMATIC_UPDATE">Updated</mat-list-option>
        <mat-list-option checkboxPosition="before" value="SCHEMATIC_CREATE">Create</mat-list-option>
        <mat-list-option checkboxPosition="before" value="SCHEMATIC_DELETE">Delete</mat-list-option>

        <mat-divider></mat-divider>
        <div mat-subheader>Content <b>(Beta)</b></div>
        <mat-list-option checkboxPosition="before" value="CONTENT_READ">Read</mat-list-option>
        <mat-list-option checkboxPosition="before" value="CONTENT_UPDATE">Updated</mat-list-option>
        <mat-list-option checkboxPosition="before" value="CONTENT_CREATE">Create</mat-list-option>
        <mat-list-option checkboxPosition="before" value="CONTENT_DELETE">Delete</mat-list-option>
        <mat-list-option checkboxPosition="before" value="CONTENT_PUBLISH">Publish</mat-list-option>

      </mat-selection-list>
    </ng-container>

  </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button [mat-dialog-close]="undefined">Cancel</button>
  <button mat-raised-button color="primary" [mat-dialog-close]="form.value" [disabled]="!form.valid">Invite</button>
</mat-dialog-actions>

<ng-container *ngIf="isTest">
  <pre>{{form.value | json}}</pre>
</ng-container>
